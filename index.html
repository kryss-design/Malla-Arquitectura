<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla Arquitectura</title>

<style>
body{
  font-family: 'Segoe UI', Arial, sans-serif;
  background:#F7F5F6;
  margin:0;
  padding:20px;
  color:#4A4A4A;
}

h1{
  text-align:center;
  margin-bottom:30px;
  color:#4A4A4A;
  font-weight:600;
}

.grid{
  display:grid;
  grid-template-columns:repeat(11,260px);
  gap:18px;
  overflow-x:auto;
  padding-bottom:15px;
}

.semester{
  background:#ffffff;
  border-radius:16px;
  padding:14px;
  box-shadow:0 6px 18px rgba(0,0,0,.08);
  border-top:6px solid #E5A3B3;
}

.semester h2{
  text-align:center;
  font-size:14px;
  margin:0 0 12px 0;
  color:#6B6B6B;
  font-weight:600;
}

/* RAMOS */
.course{
  padding:9px;
  margin:9px 0;
  border-radius:10px;
  font-size:12px;
  text-align:center;
  transition:all .2s ease;
  border:1px solid transparent;
}

.course:hover{
  transform:scale(1.03);
}

/* ESTADOS */
.pending{
  background:#F3F4F6;
}

.inprogress{
  background:#FADADD;
  border-color:#E5A3B3;
}

.approved{
  background:#D7E4DC;
  border-color:#9DB7A6;
  font-weight:600;
}

.locked{
  background:#E2E4E9;
  color:#9A9A9A;
  cursor:not-allowed;
  opacity:0.7;
}

</style>
</head>

<body>

<h1>Malla Arquitectura – Interactiva</h1>
<div class="grid" id="grid"></div>

<script>
// =======================
// DATOS DE LA MALLA
// =======================
const data = [
  {sem:1,courses:[
    {id:'ARQ111',name:'Matemática Aplicada I',req:[]},
    {id:'ARQ112',name:'Representación Arquitectónica',req:[]},
    {id:'ARQ113',name:'Historia y Teoría I',req:[]},
    {id:'ARQ114',name:'Comprensión Lectora',req:[]},
    {id:'ARQ115',name:'Taller de Arquitectura I',req:[]},
    {id:'IFG100',name:'Inglés I',req:[]}
  ]},
  {sem:2,courses:[
    {id:'ARQ121',name:'Matemática Aplicada II',req:['ARQ111']},
    {id:'ARQ122',name:'Geometría y Representación I',req:['ARQ112']},
    {id:'ARQ123',name:'Historia y Teoría II',req:['ARQ113']},
    {id:'ARQ124',name:'Taller de Arquitectura II',req:['ARQ115']},
    {id:'IFG200',name:'Inglés II',req:['IFG100']}
  ]},
  {sem:3,courses:[
    {id:'ARQ211',name:'Urbanismo I',req:[]},
    {id:'ARQ212',name:'Geometría y Representación II',req:['ARQ122']},
    {id:'ARQ213',name:'Estructura I',req:['ARQ121']},
    {id:'ARQ214',name:'Taller de Arquitectura III',req:['ARQ124']},
    {id:'IFG300',name:'Inglés III',req:['IFG200']}
  ]},
  {sem:4,courses:[
    {id:'ARQ221',name:'Urbanismo II',req:['ARQ211']},
    {id:'ARQ222',name:'Modelación Digital',req:['ARQ212']},
    {id:'ARQ223',name:'Estructura II',req:['ARQ213']},
    {id:'ARQ224',name:'Expresión Oral',req:['ARQ114']},
    {id:'ARQ225',name:'Taller de Arquitectura IV',req:['SEM3']}
  ]},
  {sem:5,courses:[
    {id:'ARQ311',name:'Urbanismo III',req:['ARQ221']},
    {id:'ARQ312',name:'BIM / Modelación',req:['ARQ222']},
    {id:'ARQ313',name:'Estructura III',req:['ARQ223']},
    {id:'ARQ314',name:'Taller de Arquitectura V',req:['ARQ225']},
    {id:'MFG114',name:'Introducción a la Fe',req:[]}
  ]},
  {sem:6,courses:[
    {id:'ARQ321',name:'Sistemas Constructivos I',req:[]},
    {id:'ARQ322',name:'BIM / Revisión',req:['ARQ312']},
    {id:'ARQ323',name:'Topografía',req:['ARQ212']},
    {id:'ARQ324',name:'Tecnología en Diseño y Materialización',req:['ARQ313']},
    {id:'ARQ325',name:'Taller de Arquitectura VI',req:['ARQ314']},
    {id:'MFG216',name:'Ética Cristiana',req:['MFG114']}
  ]},
  {sem:7,courses:[
    {id:'ARQ411',name:'Sistemas Constructivos II',req:['ARQ321']},
    {id:'ARQ412',name:'BIM / Coordinación',req:['ARQ322']},
    {id:'ARQ413',name:'Edificio y Entorno I',req:['ARQ311']},
    {id:'ARQ414',name:'Metodología de la Investigación',req:['ARQ325']},
    {id:'ARQ415',name:'Taller de Arquitectura VII',req:['ARQ325']}
  ]},
  {sem:8,courses:[
    {id:'ARQ421',name:'Sistemas Constructivos III',req:['ARQ411']},
    {id:'ARQ422',name:'BIM / Dirección y Gestión',req:['ARQ412']},
    {id:'ARQ423',name:'Edificio y Entorno II',req:['ARQ413']},
    {id:'ARQ424',name:'Taller de Arquitectura VIII',req:['SEM7']},
    {id:'CFG1',name:'Certificación I',req:[]}
  ]},
  {sem:9,courses:[
    {id:'ARQ511',name:'Electivo I',req:['SEM8']},
    {id:'ARQ512',name:'Eficiencia Energética',req:['ARQ423']},
    {id:'ARQ513',name:'Arquitectura Sustentable I',req:['ARQ423']},
    {id:'ARQ514',name:'Gestión de Proyectos',req:[]},
    {id:'ARQ515',name:'Taller de Arquitectura IX',req:['ARQ424']},
    {id:'CFG2',name:'Certificación II',req:['CFG1']}
  ]},
  {sem:10,courses:[
    {id:'ARQ521',name:'Electivo II',req:['ARQ511']},
    {id:'ARQ522',name:'Normativa en Proyectos',req:[]},
    {id:'ARQ523',name:'Arquitectura Sustentable II',req:['ARQ513']},
    {id:'ARQ524',name:'Formulación y Evaluación de Proyectos',req:['ARQ514']},
    {id:'ARQ525',name:'Taller de Arquitectura X',req:['ARQ515']},
    {id:'CFG3',name:'Certificación III',req:['CFG2']}
  ]},
  {sem:11,courses:[
    {id:'ARQ611',name:'Electivo III',req:['ARQ521']},
    {id:'ARQ612',name:'Taller de Titulación',req:['SEM10']}
  ]}
];

// =======================
// LÓGICA
// =======================
let state = JSON.parse(localStorage.getItem('malla')) || {};

function semesterApproved(n){
  const sem = data.find(s=>s.sem===n);
  return sem.courses.every(c=>state[c.id]==='approved');
}

function canUnlock(req){
  return req.every(r=>{
    if(r.startsWith('SEM')){
      return semesterApproved(parseInt(r.replace('SEM','')));
    }
    return state[r]==='approved';
  });
}

function nextState(s){
  return s==='pending' ? 'inprogress' :
         s==='inprogress' ? 'approved' : 'pending';
}

function render(){
  const g=document.getElementById('grid');
  g.innerHTML='';
  data.forEach(s=>{
    const d=document.createElement('div');
    d.className='semester';
    d.innerHTML=`<h2>Semestre ${s.sem}</h2>`;
    s.courses.forEach(c=>{
      const st=state[c.id]||'pending';
      const ok=canUnlock(c.req);
      const div=document.createElement('div');
      div.className=`course ${st} ${!ok?'locked':''}`;
      div.textContent=c.name;
      if(ok){
        div.onclick=()=>{
          state[c.id]=nextState(st);
          localStorage.setItem('malla',JSON.stringify(state));
          render();
        };
      }
      d.appendChild(div);
    });
    g.appendChild(d);
  });
}
render();
</script>

</body>
</html>
